<!DOCTYPE html>
<html>
<head>
  <title>Python Math Microservice</title>
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f9f9f9; }
    .container { max-width: 500px; margin-top: 40px; }
    .form-section { margin-bottom: 32px; }
    .logout-link { float: right; }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="mb-4 text-center">ðŸŽ¯ Python Math Microservice</h1>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-3">
          {% for category, msg in messages %}
            <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }}">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% if session.user %}
      <div class="mb-3">
        <span>Bine ai venit, <strong>{{ session.user }}</strong>!</span>
        <a href="{{ url_for('auth.logout') }}" class="btn btn-outline-secondary btn-sm logout-link">Logout</a>
      </div>
    {% endif %}

    <!-- POW FORM -->
    <div class="form-section card p-3 shadow-sm">
      <h4>CalculeazÄƒ Puterea (pow)</h4>
      <form method="get" action="{{ url_for('math.pow_route') }}">
        <div class="row mb-2">
          <div class="col">
            <input type="number" class="form-control" name="a" placeholder="Baza (a)" required>
          </div>
          <div class="col">
            <input type="number" class="form-control" name="b" placeholder="Exponent (b)" required>
          </div>
        </div>
        <button type="submit" class="btn btn-primary w-100">CalculeazÄƒ pow(a, b)</button>
      </form>
    </div>

    <!-- FIBONACCI FORM -->
    <div class="form-section card p-3 shadow-sm">
      <h4>CalculeazÄƒ Fibonacci</h4>
      <form method="get" action="{{ url_for('math.fibonacci_route') }}">
        <div class="mb-2">
          <input type="number" class="form-control" name="n" placeholder="Index n" min="0" required>
        </div>
        <button type="submit" class="btn btn-success w-100">CalculeazÄƒ Fibonacci(n)</button>
      </form>
    </div>

    <!-- FACTORIAL FORM -->
    <div class="form-section card p-3 shadow-sm">
      <h4>CalculeazÄƒ Factorial</h4>
      <form method="get" action="{{ url_for('math.factorial_route') }}">
        <div class="mb-2">
          <input type="number" class="form-control" name="n" placeholder="NumÄƒr n" min="0" required>
        </div>
        <button type="submit" class="btn btn-warning w-100">CalculeazÄƒ Factorial(n)</button>
      </form>
    </div>

    <div class="mt-4 text-center">
      <a href="/logs" class="btn btn-outline-dark">Vezi Loguri</a>
    </div>
  </div>
</body>
</html>
